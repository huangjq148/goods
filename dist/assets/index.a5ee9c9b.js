import{r as l,a9 as P,O as S,o as L,N,aa as V,a2 as G,C as j,B as q,ab as A,ac as D,e as s,f as m,g as u,a3 as p,i as r,j as g,a5 as I,m as O,t as y}from"./index.29382301.js";import{q as T,d as U}from"./product.31621516.js";const Z={name:"GoodsList"},H=Object.assign(Z,{setup(z){const c=l(""),h=P(),n=l([]),i=l(!1),d=l(!1),v=l(1);S(c,()=>{n.value=[],_({name:c.value})});const k=async a=>{await U(a),n.value=n.value.filter(t=>t.id!=a)},x=a=>{h.push(`/goods/create?id=${a}`)},_=async a=>{let t=v.value++;a?(t=1,v.value=1):a={};const{content:o}=await T({current:t++,pageSize:15,...a});o?(n.value=n.value.concat(o),i.value=!1,(o==null?void 0:o.length)<10&&(d.value=!0)):d.value=!0};return L(()=>{_()}),(a,t)=>{const o=N,C=V,b=G,w=j,f=q,E=A,B=D;return s(),m(g,null,[u(o,{title:"\u5168\u90E8\u5546\u54C1"}),u(C,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD"},null,8,["modelValue"]),n.value.length?(s(),p(B,{key:1,class:"goods-list",loading:i.value,"onUpdate:loading":t[1]||(t[1]=e=>i.value=e),finished:d.value,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:_},{default:r(()=>[(s(!0),m(g,null,I(n.value,(e,M)=>(s(),p(E,{key:e},{right:r(()=>[u(f,{onClick:()=>k(e.id),square:"",type:"danger",text:"\u5220\u9664"},null,8,["onClick"])]),default:r(()=>[u(w,{title:e.name,onClick:()=>x(e.id)},{default:r(()=>[O(" \u8FDB\u4EF7\uFF1A"+y(e.buyPrice)+" \u552E\u4EF7\uFF1A"+y(e.sellPrice),1)]),_:2},1032,["title","onClick"])]),_:2},1024))),128))]),_:1},8,["loading","finished"])):(s(),p(b,{key:0,description:"\u6CA1\u6709\u6570\u636E"})),u(f,{to:"/goods/create",class:"add-button",icon:"plus",type:"primary"})],64)}}});export{H as default};
