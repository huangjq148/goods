import{w as L,s as T,u as M,r as s,c as w,o as j,q as G,N as Y,C as E,B as R,F as A,a as H,b as J,P as K,d as Q,e as W,f as X,g as t,h as y,i as n,j as Z,k as ee,l as le,m as i,t as _,n as V}from"./index.29382301.js";import{q as ae}from"./product.31621516.js";import{q as te}from"./contact.0f7f5027.js";const oe=L(T);const ne=V("br",null,null,-1),ue=V("br",null,null,-1),re={style:{margin:"16px"}},se={name:"OrderCreate"},pe=Object.assign(se,{setup(ie){const c=M().query.id,p=new Date,d=s(!1),m=s(!1),v=s(!1),e=s({orderTime:`${p.getFullYear()}-${p.getMonth()+1}-${p.getDate()}`,name:"",contact:"",address:"",buyPrice:"",sellPrice:"",number:"",phone:"",remark:"",otherCost:""}),g=s([]),b=s([]),$=w(()=>g.value.map(o=>`${o.name}-${o.buyPrice}-${o.sellPrice}`)),q=w(()=>b.value.map(o=>`${o.name}-${o.address}`)),U=(o,l)=>{const r=g.value[l];e.value.name=r.name,e.value.buyPrice=r.buyPrice,e.value.sellPrice=r.sellPrice,m.value=!1},S=(o,l)=>{const r=b.value[l];e.value.contact=r.name,e.value.address=r.address,d.value=!1},x=async()=>{const{content:o}=await ae({current:1,pageSize:3e3});g.value=o,m.value=!0},B=async()=>{const{content:o}=await te({current:1,pageSize:3e3});b.value=o,d.value=!0},D=o=>`${o.getYear()-100}-${o.getMonth()+1}-${o.getDate()}`,z=o=>{v.value=!1,e.value.orderTime=D(o)},C=()=>{history.back()},F=async()=>{c?await le(e.value):await ee({status:"1",stockId:"0",...e.value}),C()};return j(async()=>{c&&(e.value=await G(c))}),(o,l)=>{const r=Y,h=E,f=R,u=A,I=H,N=J,P=oe,k=K,O=Q;return W(),X(Z,null,[t(r,{title:y(c)?"\u7F16\u8F91\u8BA2\u5355":"\u65B0\u589E\u8BA2\u5355","left-text":"\u8FD4\u56DE","left-arrow":"",onClickLeft:C},null,8,["title"]),t(N,{onSubmit:F,class:"form"},{default:n(()=>[t(I,{inset:""},{default:n(()=>[t(h,{onClick:l[0]||(l[0]=a=>v.value=!0),title:"\u65E5\u671F",value:e.value.orderTime},null,8,["value"]),t(u,{modelValue:e.value.name,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.name=a),center:"",clearable:"",label:"\u54C1\u540D",placeholder:"\u8BF7\u8F93\u5165/\u9009\u62E9\u4EA7\u54C1","input-align":"right",rules:[{required:!0,message:"\u8BF7\u8F93\u5165/\u9009\u62E9\u4EA7\u54C1"}]},{button:n(()=>[t(f,{size:"small",type:"primary",onClick:x},{default:n(()=>[i(" \u9009\u62E9 ")]),_:1})]),_:1},8,["modelValue"]),t(u,{modelValue:e.value.contact,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.contact=a),center:"",clearable:"",label:"\u6536\u8D27\u4EBA",placeholder:"\u8BF7\u8F93\u5165/\u9009\u62E9\u6536\u8D27\u4EBA","input-align":"right",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u6536\u8D27\u4EBA"}]},{button:n(()=>[t(f,{size:"small",type:"primary",onClick:B},{default:n(()=>[i(" \u9009\u62E9 ")]),_:1})]),_:1},8,["modelValue"]),t(u,{"input-align":"right",modelValue:e.value.address,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.address=a),label:"\u5730\u5740",placeholder:"\u6536\u8D27\u5730\u5740"},null,8,["modelValue"]),t(u,{"input-align":"right",modelValue:e.value.phone,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.phone=a),label:"\u624B\u673A\u53F7",placeholder:"\u624B\u673A\u53F7"},null,8,["modelValue"]),t(u,{"input-align":"right",modelValue:e.value.buyPrice,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.buyPrice=a),label:"\u6210\u672C",placeholder:"\u6210\u672C",type:"number",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u6210\u672C"}]},null,8,["modelValue"]),t(u,{"input-align":"right",modelValue:e.value.sellPrice,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.sellPrice=a),label:"\u552E\u4EF7",placeholder:"\u552E\u4EF7",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u552E\u4EF7"}]},null,8,["modelValue"]),t(u,{"input-align":"right",modelValue:e.value.number,"onUpdate:modelValue":l[7]||(l[7]=a=>e.value.number=a),label:"\u91CD\u91CF",placeholder:"\u91CD\u91CF",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u91CD\u91CF"}]},null,8,["modelValue"]),t(u,{"input-align":"right",modelValue:e.value.otherCost,"onUpdate:modelValue":l[8]||(l[8]=a=>e.value.otherCost=a),label:"\u5176\u4ED6\u8D39\u7528",placeholder:"\u5176\u4ED6\u8D39\u7528"},null,8,["modelValue"]),t(h,{title:"\u6C47\u603B"},{default:n(()=>[i(" \u8FDB\u4EF7\uFF1A"+_(e.value.buyPrice*e.value.number)+" ",1),ne,i(" \u552E\u4EF7\uFF1A"+_(e.value.sellPrice*e.value.number)+" ",1),ue,i(" \u5229\u6DA6\uFF1A"+_(e.value.sellPrice*e.value.number-e.value.buyPrice*e.value.number-e.value.otherCost),1)]),_:1}),t(u,{"input-align":"right",modelValue:e.value.remark,"onUpdate:modelValue":l[9]||(l[9]=a=>e.value.remark=a),name:"\u5907\u6CE8",label:"\u5907\u6CE8",type:"textarea",placeholder:"\u5907\u6CE8",rows:"1",autosize:""},null,8,["modelValue"]),V("div",re,[t(f,{round:"",block:"",type:"primary","native-type":"submit"},{default:n(()=>[i(" \u63D0\u4EA4 ")]),_:1})])]),_:1})]),_:1}),t(k,{show:m.value,"onUpdate:show":l[11]||(l[11]=a=>m.value=a),position:"bottom",style:{height:"50%"}},{default:n(()=>[t(P,{title:"\u5546\u54C1",columns:y($),onConfirm:U,onCancel:l[10]||(l[10]=a=>m.value=!1)},null,8,["columns"])]),_:1},8,["show"]),t(k,{show:d.value,"onUpdate:show":l[13]||(l[13]=a=>d.value=a),position:"bottom",style:{height:"50%"}},{default:n(()=>[t(P,{title:"\u6536\u8D27\u4EBA",columns:y(q),onConfirm:S,onCancel:l[12]||(l[12]=a=>d.value=!1)},null,8,["columns"])]),_:1},8,["show"]),t(O,{show:v.value,"onUpdate:show":l[14]||(l[14]=a=>v.value=a),onConfirm:z},null,8,["show"])],64)}}});export{pe as default};
